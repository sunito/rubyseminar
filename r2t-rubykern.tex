 
\documentclass{beamer}

\usepackage[german]{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8x]{inputenc} 

\usepackage{verbatim}
\usepackage{listings} 
% \lstset{numbers=left, numberstyle=\tiny, numbersep=5pt} 
 

%\usetheme{Hannover}
\usetheme{Warsaw}

\title[Ruby]{Ruby Features\\Die spannenden Features von Ruby}
\author{Sven Suska, Thomas Preymesser}
%\institute{Math-linux.com}
\date{2009-Juni-18}
\begin{document}
\lstset{language=Ruby}
\lstset{basicstyle=\small,numbers=left, numberstyle=\tiny, numbersep=5pt}
\begin{frame}
\titlepage
\end{frame}



\input{c010-intro/intro-chapter.tex}

\input{ch-threads/threads-chapter.tex}
\input{ch-fiber/fiber-chapter.tex}

\input{rubygems-chapter.tex}

\begin{frame}
  \frametitle{Automatisierte Tests mit Ruby}
  Automatisierte Tests mit Ruby
  \begin{itemize}
    \item<1-> TestUnit (Standard--Bibliothek in Ruby)
    \item<2-> RSpec (separat zu installieren)
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Automatisierte Tests mit Ruby / TestUnit}
  Automatisierte Tests mit Ruby
  \begin{itemize}
    \item TestUnit (Standard--Bibliothek in Ruby)
    \pause
    \item RSpec 
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Automatisierte Tests mit Ruby / TestUnit}
  Warum automatisierte Tests?
  \begin{itemize}
    \item Leicht auf Knopfdruck aufzurufen
    \item Solide Basis an Tests bei gr"o"seren Anwendungen
    \item Vertrauen bei Modifikation der Anwendung
    \item Test ''dokumentieren'' Verwendung von Code
    \item Test-Driven-Development (TDD)
  \end{itemize}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Automatisierte Tests mit Ruby / TestUnit}
\lstinputlisting[frame=single,caption={konto.rb}]{code/tests/testunit/konto.rb}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Automatisierte Tests mit Ruby / TestUnit}
%\lstinputlisting[frame=single,caption={test$_$konto.rb}]{code/tests/testunit/test_konto.rb}
\end{frame}

\begin{frame}
  \frametitle{Automatisierte Tests mit Ruby / TestUnit}
  \begin{itemize}
    \item Namen der Testmethoden beginnen mit '\texttt{test\_}'
    \item Reihenfolge der Tests ist {\bf nicht} die Reihenfolge im Source
    \item Reihenfolge der Tests ist {\bf nicht} definiert
    \item Aufruf einer einzelnen Testmethode:\\ '\texttt{ruby test\_konto.rb --name test\_anfangssaldo}'
    \item Mehrere Test--Files k"onnen zu Test--Suites zusammengefa"st werden
    \item GUI-Ausgabe statt nur Text m"oglich
    \item Gem ZenTest (autotest)
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Automatisierte Tests mit Ruby / TestUnit}
  Meta-Programming / Reflection
  \begin{itemize}
    \item at\_exit
    \item methods ('test\_')
  \end{itemize}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Automatisierte Tests mit Ruby / TestUnit}
  \lstinputlisting[frame=single,caption={Resultat}]{code/tests/testunit/test_result}
\end{frame}

\begin{frame}
  \frametitle{Automatisierte Tests mit Ruby / TestUnit}
  Test::Unit assertions
  \begin{itemize}
    \item assert
    \item assert\_equal
    \item assert\_not\_equal
    \item assert\_nil
    \item assert\_not\_nil
    \item assert\_kind\_of
    \item assert\_raise(Exception) \{ ... \}
    \item assert\_nothing\_raised(Exception) \{ ... \}
    \item assert\_in\_delta
    \item ...
  \end{itemize}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Automatisierte Tests mit Ruby / TestUnit}
  \lstinputlisting[frame=single,caption={setup / teardown}]{code/tests/testunit/setupteardown.rb}
\end{frame}

\begin{frame}
  \frametitle{Automatisierte Tests mit Ruby / TestUnit}
Optionale Methoden 
\begin{itemize}
  \item setup
  \item teardown
\end{itemize}
werden vor bzw. nach jedem Test aufgerufen
\end{frame}

\begin{frame}
  \frametitle{Logging}
  \begin{itemize}
    \item Klasse Logger in Standard--Library
    \item log4r als Gem
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Logging}
  \lstinputlisting[frame=single,caption={Logging Beispiel}]{code/logging/loggingbeispiel.rb}
\end{frame}

\begin{frame}
  \frametitle{Logging}
  \lstinputlisting[frame=single,caption={Logging Ausgabe}]{code/logging/logging_result}
\end{frame}

\begin{frame}
  \frametitle{Logging}
  Logging-Level:
  \begin{itemize}
    \item FATAL: an unhandleable error that results in a program crash
    \item ERROR: a handleable error condition
    \item WARN:	a warning
    \item INFO:	generic (useful) information about system operation
    \item DEBUG: low-level information for developers 
  \end{itemize}

  M"ogliche Anpassungen:
  \begin{itemize}
    \item \texttt{log.datetime\_format = ''\%H:\%M:\%S''}
    \item \texttt{log = Logger.new(''mein.log'', 5, 10*1024)}
    \item \texttt{logger = Logger.new('foo.log', 'daily')}
    \item \texttt{logger = Logger.new('foo.log', 'weekly')}
    \item \texttt{logger = Logger.new('foo.log', 'monthly')}
 
  \end{itemize}
\end{frame}

\begin{frame}
 \frametitle{Unterschiede 1.8.x / 1.9.x}
 \begin{itemize}
   \item<1->Encoding
   \item<2->String#each \arrow String#each_line
   \item<3->viele Gems funktionieren unter 1.9 noch nicht (www.isitruby19.com)
   \item<4->"ABC"[0] => Ruby 1.8: 65, Ruby 1.9: "A"
   \item<5->Interface f"ur C-Extensions ge"andert
   \item<6->??? Parameter bei Methoden, Bloecken
   \item ... 
 \end{itemize}

\end{frame}

\begin{frame}
  Literatur / Links
  \begin{itemize}
    \item Programming Ruby (Pickaxe Buch) 
    \item Ruby Cookbook
    \item http://www.rubyforen.de
    \item http://wiki.ruby-portal.de/Hauptseite
    \item Newsgroup comp.lang.ruby 
    \item Newsgroup de.comp.lang.ruby 
  \end{itemize}
\end{frame}

\end{document}
